version: '2'
services:
  java-server:
    container_name: java-server
    build:
      context: sprint-boot-java-app/hotels
      dockerfile: Dockerfile
    image: java-server:latest
    ports:
      - 18080:8080
    networks:
      - spring-cloud-network
  mongo:
    image: 'mongo'
    container_name: 'my-mongo-container'
    environment:
      MONGO_INITDB_DATABASE: cmpe202
      MONGO_INITDB_ROOT_USERNAME: cmpe202
      MONGO_INITDB_ROOT_PASSWORD: cmpe202
    volumes:
      - ./init-mongo.js:/docker-entrypoint-initdb.d/init-mongo.js:ro
      - ./mongo-volume:/data/db
    ports:
      - '27017-27019:27017-27019'
networks:
  spring-cloud-network:
    driver: bridge